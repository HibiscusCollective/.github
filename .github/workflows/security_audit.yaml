name: Audit organization security posture
on:
  schedule:
    - cron: '30 0 * * 1-5'
  workflow_dispatch:

permissions: read-all

jobs:
  audit:
    runs-on: ubuntu-latest
    permissions:
    # Needed to upload the results to code-scanning dashboard.
      security-events: write
    # Needed to publish results and get a badge (see publish_results below).
      id-token: write
    steps:
      - name: Legitify Analyze
        uses: Legit-Labs/legitify@main
        with:
          github_token: ${{ secrets.PAT_FOR_LEGITIFY }}
