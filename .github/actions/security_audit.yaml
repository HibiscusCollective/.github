name: Audit organization security posture
on:
  schedule:
    - cron: '27 22 * * 1-5'

permissions: read-all

jobs:
  audit:
    runs-on: ubuntu-latest
    # Needed to upload the results to code-scanning dashboard.
    security-events: write
    # Needed to publish results and get a badge (see publish_results below).
    id-token: write
    steps:
      - name: Legitify Analyze
        uses: Legit-Labs/legitify@v1.0.11
        with:
          github_token: ${{ secrets.PAT_FOR_LEGITIFY }}